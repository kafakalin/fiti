<!DOCTYPE html>
<html lang="en" class="message-html">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>對話視窗</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/simplebar.css">
    <link rel="stylesheet" href="css/fiti.css">
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon"/>
</head>
<body class="message-body">
<div class="message-box">
    <div class="message-box-content">
        <div class="message-box-messages" id="message-box-messages">
            <div class="message-group customer-message">
                <div class="messages">
                    <div class="message-item">
                        <div class="message-item-inside">Hello! 我是Chris，是你這次的客服人員，很高興為您服務。</div>
                    </div>
                    <div class="message-item">
                        <div class="message-item-inside">請問有什麼地方需要協助的？</div>
                        <span class="message-time">2019-06-25 17:47</span>
                    </div>
                </div>
                <div class="profile">
                    <img src="img/customer_pic.png" alt="">
                </div>
            </div>

            <div class="message-group user-message">
                <div class="messages">
                    <div class="user-name">Kevin Chen</div>
                    <div class="message-item">
                        <div class="message-item-inside">要麻煩你幫我問一下現在這樣開發，我可以跑js或jq嗎，還有你們背後的核心程式版本為何？</div>
                    </div>

                    <div class="message-item">
                        <div class="message-item-inside">謝謝！</div>
                        <span class="message-time">2019-06-25 17:48</span>
                    </div>
                </div>
                <div class="profile">
                    <img src="img/user_pic.png" alt="">
                </div>
            </div>

            <div class="message-group customer-message">
                <div class="messages">
                    <div class="message-item">
                        <div class="message-item-inside">速度快、初始費用低、建置期短，是現今企業轉向採用雲端CRM的考量，其究竟影響企業的哪些層面？<br><br>
                            1.可在行動裝置上使用服務，提高作業人員的效率<br><br>
                            2.可從小範圍開始，只需最低投資。<br><br>
                            3.不需要維護伺服器，升級也是自動的，不受限於IT能力的不足。</div>
                    </div>
                    <div class="message-item">
                        <div class="message-item-inside">隨著行動裝置的普及，CRM系統也提供業者跨裝置使用的能力，提升使用效率；行動力優化後，前線業務與現場工程師的作業效率也大幅改善。團隊現在可以透過行動裝置即時掌握顧客最新數據、提升服務品質，加強顧客體驗。</div>
                        <span class="message-time">2019-06-25 17:49</span>
                    </div>
                </div>
                <div class="profile">
                    <img src="img/customer_pic.png" alt="">
                </div>
            </div>

            <div class="message-group user-message">
                <div class="messages">
                    <div class="user-name">Kevin Chen</div>
                    <div class="message-item">
                        <div class="message-item-inside">好的，我了解～謝謝！</div>
                        <span class="message-time">2019-06-25 17:48</span>
                    </div>
                </div>
                <div class="profile">
                    <img src="img/user_pic.png" alt="">
                </div>
            </div>

            <div class="message-group customer-message">
                <div class="messages">
                    <div class="message-item">
                        <div class="message-item-inside">不客氣，還有其他地方需要協助嗎？</div>
                        <span class="message-time">2019-06-25 17:49</span>
                    </div>
                </div>
                <div class="profile">
                    <img src="img/customer_pic.png" alt="">
                </div>
            </div>

            <div class="message-group customer-message">
                <div class="messages">
                    <div class="message-item">
                        <div class="message-item-inside">Hello! 我是Chris，是你這次的客服人員，很高興為您服務。</div>
                    </div>
                    <div class="message-item">
                        <div class="message-item-inside">請問有什麼地方需要協助的？</div>
                        <span class="message-time">2019-06-25 17:47</span>
                    </div>
                </div>
                <div class="profile">
                    <img src="img/customer_pic.png" alt="">
                </div>
            </div>

            <div class="message-group user-message">
                <div class="messages">
                    <div class="user-name">Kevin Chen</div>
                    <div class="message-item">
                        <div class="message-item-inside">要麻煩你幫我問一下現在這樣開發，我可以跑js或jq嗎，還有你們背後的核心程式版本為何？</div>
                    </div>

                    <div class="message-item">
                        <div class="message-item-inside">謝謝！</div>
                        <span class="message-time">2019-06-25 17:48</span>
                    </div>
                </div>
                <div class="profile">
                    <img src="img/user_pic.png" alt="">
                </div>
            </div>

            <div class="message-group customer-message">
                <div class="messages">
                    <div class="message-item">
                        <div class="message-item-inside">速度快、初始費用低、建置期短，是現今企業轉向採用雲端CRM的考量，其究竟影響企業的哪些層面？<br><br>
                            1.可在行動裝置上使用服務，提高作業人員的效率<br><br>
                            2.可從小範圍開始，只需最低投資。<br><br>
                            3.不需要維護伺服器，升級也是自動的，不受限於IT能力的不足。</div>
                    </div>
                    <div class="message-item">
                        <div class="message-item-inside">隨著行動裝置的普及，CRM系統也提供業者跨裝置使用的能力，提升使用效率；行動力優化後，前線業務與現場工程師的作業效率也大幅改善。團隊現在可以透過行動裝置即時掌握顧客最新數據、提升服務品質，加強顧客體驗。</div>
                        <span class="message-time">2019-06-25 17:49</span>
                    </div>
                </div>
                <div class="profile">
                    <img src="img/customer_pic.png" alt="">
                </div>
            </div>

            <div class="message-group user-message">
                <div class="messages">
                    <div class="user-name">Kevin Chen</div>
                    <div class="message-item">
                        <div class="message-item-inside">好的，我了解～謝謝！</div>
                        <span class="message-time">2019-06-25 17:48</span>
                    </div>
                </div>
                <div class="profile">
                    <img src="img/user_pic.png" alt="">
                </div>
            </div>

            <div class="message-group customer-message">
                <div class="messages">
                    <div class="message-item">
                        <div class="message-item-inside">不客氣，還有其他地方需要協助嗎？</div>
                        <span class="message-time">2019-06-25 17:49</span>
                    </div>
                </div>
                <div class="profile">
                    <img src="img/customer_pic.png" alt="">
                </div>
            </div>

        </div>
        <div class="message-box-input">
            <div class="scroll-control">
                <a href="#" id='up'>
                    <img src="img/gotop.png" alt="">
                </a>
                <a href="#" id='down'>
                    <img src="img/gobottom.png" alt="">
                </a>
            </div>
            <div class="message-box-input-sticker">
                <ul class="recent-sticker">
                    <li style="background-image:url(https://stickershop.line-scdn.net/stickershop/v1/sticker/9913440/iPhone/sticker_key@2x.png;compress=true);"></li>
                    <li style="background-image:url(https://stickershop.line-scdn.net/stickershop/v1/sticker/9913440/iPhone/sticker_key@2x.png;compress=true);"></li>
                    <li style="background-image:url(https://stickershop.line-scdn.net/stickershop/v1/sticker/9913440/iPhone/sticker_key@2x.png;compress=true);"></li>
                    <li style="background-image:url(https://stickershop.line-scdn.net/stickershop/v1/sticker/9913440/iPhone/sticker_key@2x.png;compress=true);"></li>
                    <li style="background-image:url(https://stickershop.line-scdn.net/stickershop/v1/sticker/9913440/iPhone/sticker_key@2x.png;compress=true);"></li>
                    <li style="background-image:url(https://stickershop.line-scdn.net/stickershop/v1/sticker/9913440/iPhone/sticker_key@2x.png;compress=true);"></li>
                    <li style="background-image:url(https://stickershop.line-scdn.net/stickershop/v1/sticker/9913440/iPhone/sticker_key@2x.png;compress=true);"></li>
                </ul>
                <ul class="sticker-menu">
                    <li><a href="#"><img src="img/smiling-emoticon-square-face.png" alt=""></a></li>
                    <li><a href="#"><img src="img/clip.png" alt=""></a></li>
                </ul>
                <div class="clearfix"></div>
            </div>
            <div class="message-box-input-textarea">
                <textarea class="form-control" id="chat" placeholder="請在此輸入訊息...|"></textarea>
            </div>
        </div>
    </div>
</div>
<script src="js/jquery-3.3.1.slim.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/simplebar.min.js"></script>
<script src="js/bootstrap.js"></script>
<script>
    $(function() {
        new SimpleBar(document.getElementById('message-box-messages'),{
            autoHide: false
        });
        $("#up").on("click", function(e) {
            $(".simplebar-content-wrapper").scrollTop(0);
            e.preventDefault();
        });
        $("#down").on("click", function(e) {
            $(".simplebar-content-wrapper").scrollTop($(".simplebar-content-wrapper")[0].scrollHeight);
            e.preventDefault();
        });
        $("#chat").on("keyup", function(e) {
            if (e.keyCode == 13 && !e.shiftKey) {
                var dt = getNow();
                var tar = $(".customer-message:last");
                var obj = $(tar).clone();
                if ($(tar).index() == ($(".message-group").length-1)) {
                    $(tar).find(".profile>img").remove();
                }
                if ($(tar).find(".message-time").html() == dt) {
                    $(tar).find(".message-time").remove();
                }
                $(obj).find(".message-item-inside").html($(this).val().replace(/(?:\r\n|\r|\n)/g, '<br>'));
                $(obj).find(".message-time").html(dt);
                $(obj).appendTo("div.simplebar-content");

                $("#down").trigger("click");

                $(this).val("");
            }
        });
    });

    function getNow() {
        var currentDate = new Date();
        var date = currentDate.getDate();
        var month = currentDate.getMonth(); 
        var year = currentDate.getFullYear();
        var hours = currentDate.getHours();
        var minutes = currentDate.getMinutes();

        return year + "-" + pad(month+1) + "-" + pad(date) + ' ' + pad(hours) + ":" + pad(minutes);
    }

    function pad(n) {
        return n<10 ? '0'+n : n;
    }
</script>
</body>
</html>